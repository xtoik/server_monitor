<span>
    <mat-icon *ngIf="level > 1">subdirectory_arrow_right</mat-icon>
    <button mat-icon-button *ngIf="service.services.length > 0 && !expanded && areChildrenOk(service)"
            (click)="toogleExpanded()">
        <mat-icon>expand_more</mat-icon>
    </button>        
    <button mat-icon-button *ngIf="service.services.length > 0 && (expanded  || !areChildrenOk(service))"
            (click)="toogleExpanded()">
        <mat-icon>expand_less</mat-icon>
    </button>
    <span class="serviceBadge" 
          [@serviceStatusOk]="getServiceStatus()">{{service.name}}</span>
    <mat-icon *ngIf="service.isOk && areChildrenOk(service)" class="isOk">check</mat-icon>
    <mat-icon *ngIf="service.isOk && !areChildrenOk(service)" class="isWarning">warning</mat-icon>
    <mat-icon *ngIf="!service.isOk" class="isNotOk">close</mat-icon>
</span>
<services-list *ngIf="service.services.length > 0" 
               [services]="service.services" 
               [expanded]="expanded || !areChildrenOk(service)"
               [level]="level"></services-list>